!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6af53788-bf78-474f-900b-ecb64cbecae7",e._sentryDebugIdIdentifier="sentry-dbid-6af53788-bf78-474f-900b-ecb64cbecae7")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3375],{17555:function(e,t,n){n.d(t,{i:function(){return v}});var l=n(97458),i=n(31737),r=n(59021),s=n(37464),o=n(49544),a=n(80937),c=n(25929),u=n(15207),d=n(11556),m=n(38474),f=n(96299),h=n(51865),x=n.n(h);let v=e=>{var t;let{title:n,description:h,authorImage:v,featuredImage:g,createNew:p,socialInfo:y,includeHeader:_=!0,accessLevel:N,className:b,size:j="normal"}=e,I=(0,i.useTranslations)("shared"),D=(0,i.useTranslations)("article");return(0,l.jsxs)(c.ZP,{className:x()("mt-md flex h-full flex-col rounded-lg border shadow-sm transition duration-200 hover:ring-1",b),children:[(0,l.jsx)(c.ZP,{variant:"offset",className:"m-xs overflow-hidden rounded-md",children:_?g?(0,l.jsx)(u.Z,{src:g,rounded:"md",containerClassName:"normal"===j?"h-24":"h-16",imageClassName:"object-cover object-center min-w-[100%] min-h-[100%]",alt:g?n:"",useNextImage:!1,includeLightBoxModal:!1}):(0,l.jsx)("div",{className:"normal"===j?"h-24":"h-16"}):null}),(0,l.jsxs)("div",{className:x()("flex grow flex-col",{"min-h-0 px-[10px] pb-sm pt-xs":"small"===j,"min-h-[120px] px-md pb-md pt-sm":"normal"===j}),children:[(0,l.jsxs)("div",{className:"grow",children:[(0,l.jsx)(d.Z,{variant:"normal"===j?"baseSemi":"smallBold",className:"line-clamp-2",children:n}),(0,l.jsx)(d.Z,{color:"light",variant:"normal"===j?"small":"tiny",className:"mt-xs line-clamp-2",children:h})]}),(0,l.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[p?(0,l.jsx)(m.Z,{text:I("create"),size:"small",variant:"border",icon:a.faPlus}):v?(0,l.jsx)(s.Z,{size:"normal"===j?"small":"tiny",user:v}):(0,l.jsx)("span",{}),p?null:(0,l.jsx)("div",{className:"mt-sm",children:N!==f.uv.PUBLIC_READ?(0,l.jsx)(d.Z,{variant:"tiny",color:"light",className:"rounded bg-offset px-[10px] py-xs dark:bg-offsetDark",children:D("draftLabelShort")}):(0,l.jsx)(r.W,{icon:o.Md,count:null!==(t=null==y?void 0:y.view_count)&&void 0!==t?t:0})})]})]})]})}},33909:function(e,t,n){var l=n(97458),i=n(820);n(52983);var r=n(31737),s=n(53541),o=n(22381),a=n(94589),c=n(35921),u=n(849),d=n(96299),m=n(25929),f=n(11556),h=n(67571),x=n(38474),v=n(78398);t.Z=e=>{var t;let{collection:n,acceptInvite:g,declineInvite:p,showLinkToCollection:y=!0}=e,_=(0,s.useRouter)(),N=n.access>d.uv.PRIVATE_READ,b=(0,r.useTranslations)("collection.contributor"),j=(0,r.useTranslations)("shared"),I=(0,r.useTranslations)("accessLevel");return(0,l.jsxs)(m.ZP,{variant:"offset",className:"rounded p-sm",children:[(0,l.jsx)(m.ZP,{className:"border-b pb-sm",children:(0,l.jsx)(f.Z,{color:"light",variant:"tiny",className:"grow",children:b("invitedSuccess")})}),(0,l.jsxs)(f.Z,{variant:"baseSemi",className:"mb-md mt-sm",children:[(0,l.jsxs)("div",{className:"mb-sm flex items-center gap-x-sm",children:[(0,l.jsx)(a.B,{unified:null!==(t=n.emoji)&&void 0!==t?t:h.$Y,size:"small"}),(0,l.jsx)(f.Z,{variant:"baseSemi",children:n.title})]}),(0,l.jsx)(o.Z,{textColor:"light",username:n.owner_user.username,image:n.owner_user.image,showAvatar:!0})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex gap-x-sm",children:[(0,l.jsx)(x.Z,{variant:"primary",text:j("accept"),size:"tiny",onClick:g}),(0,l.jsx)(x.Z,{text:j("discard"),size:"tiny",onClick:p})]}),y&&(N?(0,l.jsx)(v.Z,{size:"tiny",text:j("view"),chevron:!0,chevronIcon:c._t,onClick:()=>_.push("/collections/".concat(n.slug))}):(0,l.jsxs)(f.Z,{variant:"tiny",color:"light",className:"mr-sm",children:[(0,l.jsx)(i.G,{icon:u.by,className:"mr-xs"}),(0,l.jsx)("span",{children:I("secret")})]}))]})]})}},39912:function(e,t,n){n.d(t,{Z:function(){return c}});var l=n(97458),i=n(31737),r=n(75797),s=n(80973),o=n(38474);function a(){let{setIsIncognito:e}=(0,s.Y)(),t=(0,i.useTranslations)("incognito");return(0,l.jsx)(o.Z,{text:t("exit"),pill:!0,variant:"primary",onClick:()=>{e(!1)}})}function c(){let e=(0,i.useTranslations)("incognito");return(0,l.jsx)(r.B,{title:e("unsupported"),action:(0,l.jsx)(a,{})})}},84450:function(e,t,n){n.d(t,{f:function(){return m}});var l=n(97458);n(52983);var i=n(31737),r=n(24819),s=n.n(r),o=n(29443),a=n(17555),c=n(7552),u=n(25929),d=n(11556);let m=e=>{let{articles:t,fetchNextPage:n,hasNextPage:r=!1,showLoadingState:m=!1,showEmptyState:f=!1}=e,h=(null!=t?t:[]).map(o.l3),x=(0,i.useTranslations)("threads.main");return f&&0===h.length?(0,l.jsx)(u.ZP,{variant:"offset",className:"mt-md flex items-center justify-center rounded p-xl",children:(0,l.jsx)(d.Z,{color:"light",children:x("noArticles")})}):(0,l.jsx)(c.D,{fetchNextPage:n,hasNextPage:r,showLoadingState:m,itemsToRender:h,children:(0,l.jsx)("div",{className:"grid grid-cols-2 gap-md pb-lg md:grid-cols-3",children:h.map(e=>(0,l.jsx)(s(),{className:"block",href:e.href,children:(0,l.jsx)(a.i,{title:e.title,authorImage:e.authorImage,featuredImage:e.featuredImage,socialInfo:e.socialInfo,accessLevel:e.accessLevel,description:e.preview})},e.backendUUID))})})}},1599:function(e,t,n){var l=n(97458),i=n(52983),r=n(25929),s=n(11556),o=n(51865),a=n.n(o);t.Z=e=>{let{children:t,maxFaces:n=3,showMore:o=!0,clickable:c=!1,size:u="medium",onAvatarClick:d}=e,m=i.Children.count(t);return(0,l.jsxs)(r.ZP,{onClick:c?d:void 0,bgHover:c?"offset":void 0,className:a()("group flex items-center",{"cursor-pointer rounded-full p-xs transition-all":c}),children:[i.Children.map(t,(e,t)=>t<n?(0,l.jsx)(r.ZP,{variant:"background",className:a()("rounded-full group-hover:bg-transparent",{"relative transition-all duration-200 ease-in-out":0!==t,"-ml-[10px] p-two group-hover:-ml-xs":0!==t&&"small"===u,"-ml-[16px] p-two group-hover:-ml-sm":0!==t&&"medium"===u}),children:(0,l.jsx)("div",{children:e})},t):null),o&&m>n&&(0,l.jsx)(r.ZP,{children:(0,l.jsxs)(s.Z,{variant:"smallCaps",color:"light",className:"px-xs",children:["+",m-n]})})]})}},60493:function(e,t,n){n.d(t,{a:function(){return c}});var l=n(81993),i=n(22696),r=n(61061),s=n(41275),o=n(84981);let a=["fetch_invited_collections"],c=()=>{let e=(0,l.NL)(),t=(0,r.nO)(),{mutate:n}=(0,i.D)({mutationFn:async e=>{let{collection:n,callback:l}=e;await t.emitWithAck("respond_to_invitation",{collection_uuid:n.uuid,accept:!0,return_collection:!1}),null==l||l()},onMutate:async t=>{await e.cancelQueries({queryKey:a}),await e.cancelQueries({queryKey:s.Xt});let n=e.getQueryData(s.Xt),l=e.getQueryData(a);return t.shouldRefetchCurrentCollection?e.setQueryData(["get_collection",{collection_slug:t.collection.slug.slice(-22)}],e=>({...e,user_permission:o.XJ.WRITER})):e.setQueryData(s.Xt,e=>{let n=(e=e||{pages:[],pageParams:[]}).pages[0];return{...e,pages:[[t.collection,...n]]}}),e.setQueryData(a,e=>e.filter(e=>e.uuid!==t.collection.uuid)),{previousCollections:n,previousInvitedCollections:l}},onError:(t,n,l)=>{e.setQueryData(s.Xt,l.previousCollections),e.setQueryData(a,l.previousInvitedCollections)},onSuccess:()=>{e.invalidateQueries({queryKey:s.Xt}),e.invalidateQueries({queryKey:a})}}),{mutate:c}=(0,i.D)({mutationFn:async e=>{let{collection:n,callback:l}=e;await t.emitWithAck("respond_to_invitation",{collection_uuid:n.uuid,accept:!1,return_collection:!1}),null==l||l()},onMutate:async t=>{await e.cancelQueries({queryKey:a});let n=e.getQueryData(a);return e.setQueryData(a,e=>e.filter(e=>e.uuid!==t.collection.uuid)),{previousInvitedCollections:n}},onError:(t,n,l)=>{e.setQueryData(a,l.previousInvitedCollections)},onSuccess:()=>{e.invalidateQueries({queryKey:a})}}),{mutate:u}=(0,i.D)({mutationFn:async e=>{let{email:n,collectionUUID:l,callback:i}=e;await t.emitWithAck("invite_to_collection",{collection_uuid:l,contributor_email:n}),null==i||i()},onMutate:async t=>{let n=["get_collection",{collection_slug:t.collectionSlug.slice(-22)}];await e.cancelQueries({queryKey:n});let l=e.getQueryData(n);return e.setQueryData(n,e=>({...e,contributor_users:e.contributor_users.concat({email:t.email,username:t.email,permission:o.XJ.INVITED_WRITER})})),{previousCollection:l}},onError:(t,n,l)=>{let i=n.collectionSlug.slice(-22);e.setQueryData(["get_collection",{collection_slug:i}],null==l?void 0:l.previousCollection)},onSuccess:(t,n)=>{let l=n.collectionSlug.slice(-22);e.invalidateQueries({queryKey:["get_collection",{collection_slug:l}]})}}),{mutate:d}=(0,i.D)({mutationFn:async e=>{let{email:n,collectionUUID:l,callback:i}=e;await t.emitWithAck("remove_from_collection",{collection_uuid:l,email:n}),null==i||i()},onMutate:async t=>{let n=["get_collection",{collection_slug:t.collectionSlug.slice(-22)}];await e.cancelQueries({queryKey:n});let l=e.getQueryData(n);return e.setQueryData(n,e=>({...e,contributor_users:e.contributor_users.filter(e=>e.email!==t.email)})),{previousCollection:l}},onError:(t,n,l)=>{let i=n.collectionSlug.slice(-22);e.setQueryData(["get_collection",{collection_slug:i}],null==l?void 0:l.previousCollection)},onSuccess:(t,n)=>{let l=n.collectionSlug.slice(-22);e.invalidateQueries({queryKey:["get_collection",{collection_slug:l}]})}});return{addContributorUser:u,removeContributorUser:d,acceptCollectionInvite:n,declineCollectionInvite:c}}},84981:function(e,t,n){var l,i,r,s;n.d(t,{Om:function(){return d},Wi:function(){return h},XJ:function(){return l},Xc:function(){return i},gO:function(){return v},hT:function(){return f},hf:function(){return m},i5:function(){return c},mF:function(){return u},rj:function(){return x},xL:function(){return a},yM:function(){return o}});let o=5;function a(){return[1,2,3,4]}function c(){return[11,12,13]}function u(e){return 4===e}function d(e){return e>=3&&e<11}function m(e){return e>=2&&e<11}function f(e){return e>=1&&e<11}function h(e){return 0===e}function x(e){return c().includes(e)}function v(e){let t=e.owner_user,n=e.contributor_users,l=[],i=[];return null==n||n.forEach(e=>{11===e.permission||12===e.permission||13===e.permission?l.push(e):i.push(e)}),{ownerUser:t,contributorUsers:i,invitedUsers:l}}(r=l||(l={}))[r.NONE=0]="NONE",r[r.READER=1]="READER",r[r.WRITER=2]="WRITER",r[r.EDITOR=5]="EDITOR",r[r.ADMIN=3]="ADMIN",r[r.OWNER=4]="OWNER",r[r.INVITED_READER=11]="INVITED_READER",r[r.INVITED_WRITER=12]="INVITED_WRITER",r[r.INVITED_EDITOR=15]="INVITED_EDITOR",r[r.INVITED_ADMIN=13]="INVITED_ADMIN",(s=i||(i={})).PageAccessNotAllowed="pageAccessNotAllowed",s.ThreadAccessNotAllowed="threadAccessNotAllowed",s.InvalidThread="invalidThread",s.ThreadExpired="threadExpired",s.CollectionAccessNotAllowed="collectionAccessNotAllowed",s.InvalidCollection="invalidCollection",s.SubscriptionAlreadyActive="subscriptionAlreadyActive"}}]);