!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="b5c9a0ff-4c4f-4488-a7de-9a6161fbd431",e._sentryDebugIdIdentifier="sentry-dbid-b5c9a0ff-4c4f-4488-a7de-9a6161fbd431")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6203,8207,52,184],{59021:function(e,n,t){t.d(n,{W:function(){return i}});var a=t(97458),o=t(820),s=t(52983),l=t(11556),r=t(89782);let i=s.memo(e=>{let{icon:n,count:t,textVariant:s="tiny",textColor:i="light",className:c}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-x-xs",children:[(0,a.jsx)(l.Z,{variant:s,color:i,className:c,children:(0,a.jsx)(o.G,{size:"sm",icon:n})}),(0,a.jsx)(l.Z,{variant:s,color:i,className:c,children:(0,r.uf)(t)})]})},(e,n)=>e.count===n.count&&e.icon===n.icon&&e.className===n.className)},35638:function(e,n,t){t.d(n,{A:function(){return r},T:function(){return i}});var a=t(97458),o=t(52983),s=t(6139);let l=(0,o.createContext)({result:null,steps:null,plan:null,isPending:!1,mediaItems:[],response:null,isFailed:!1,isReadonly:!1,inFlight:!1,idx:null,isCopilot:!1,filteredMediaItems:[],isLastResult:!1,isFirstResult:!1,hasAnswer:!1,hasSteps:!1,isFinalStep:!1,isSnapshotRender:!1}),r=e=>{let{children:n,result:t,response:r,isReadonly:i,idx:c,inFlight:u,isPending:d,hasSteps:m,isFinalStep:h,isCopilot:v,mediaItems:f,filteredMediaItems:p,isFailed:x,isSnapshotRender:y,isLastResult:g}=e,b=(0,o.useMemo)(()=>{var e;return t?(0,s.c)(null!==(e=t.text)&&void 0!==e?e:""):[]},[t]),k=(0,o.useMemo)(()=>{var e;return null!==(e=null==t?void 0:t.plan)&&void 0!==e?e:null},[t]),j=!!(null==r?void 0:r.answer);return(0,a.jsx)(l.Provider,{value:{isPending:d,hasSteps:m,isFinalStep:h,isCopilot:v,mediaItems:f,filteredMediaItems:p,isFailed:x,steps:b,plan:k,result:t,response:r,isReadonly:i,inFlight:u,idx:c,hasAnswer:j,isSnapshotRender:y,isFirstResult:0===c,isLastResult:g},children:n})},i=()=>{let e=(0,o.useContext)(l);if(!e)throw Error("useThreadEntry must be used within ThreadEntryProvider");return e}},79755:function(e,n,t){t.d(n,{a:function(){return s}});var a=t(97458),o=t(25929);let s=()=>(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsxs)("div",{className:"flex gap-sm",children:[(0,a.jsx)(o.ZP,{variant:"offset",className:"h-[22px] w-[22px] rounded-full"}),(0,a.jsx)(o.ZP,{variant:"offset",className:"h-[22px] w-[80px] rounded-full"})]}),(0,a.jsx)(o.ZP,{variant:"offset",className:"mt-md h-[80px] rounded-md"})]})},25807:function(e,n,t){var a=t(97458),o=t(52983),s=t(62309),l=t(29658),r=t(89782),i=t(38474);n.Z=e=>{let{shareHref:n,hasMounted:t,isSharable:c,...u}=e,{trackEvent:d}=(0,s.h)(),m=(0,o.useCallback)(()=>{navigator.clipboard.writeText(t?(0,r.RP)(decodeURIComponent(n)):""),d("click copy link button",{})},[n,t,d]);return c?(0,a.jsx)(i.Z,{clickFeedback:!0,size:"small",onClick:m,toolTip:"Copy Link",tooltipLayout:"bottom",icon:l.nN,variant:"primary",...u}):null}},46402:function(e,n,t){var a=t(97458),o=t(52983),s=t(31737),l=t(25807),r=t(46563),i=t(4514),c=t(5658),u=t(38474);n.Z=e=>{let{isSharable:n,hasMounted:t,shareHref:d,EditorDropDownContent:m,icon:h,onClick:v}=e,{isMobileStyle:f}=(0,r.d)(),{isMacOS:p}=(0,i.Fy)(),[x,y]=(0,o.useState)(!1),g=(0,s.useTranslations)("shared"),b=(0,o.useCallback)(()=>{null==v||v(),y(e=>!e)},[v,y]),k=(0,o.useCallback)(e=>{(p?e.metaKey&&e.shiftKey&&"c"===e.key:e.ctrlKey&&e.shiftKey&&"c"===e.key)&&(e.preventDefault(),b())},[p,b]);return((0,o.useEffect)(()=>(document.addEventListener("keydown",k),()=>{document.removeEventListener("keydown",k)}),[k]),t)?(0,a.jsxs)("div",{className:"flex items-center gap-x-sm",children:[!f&&(0,a.jsx)(l.Z,{shareHref:d,hasMounted:t,isSharable:n}),(0,a.jsx)(c.p,{content:m,placement:"bottom-end",isMobileStyle:f,onClose:()=>y(!1),isOpen:x,children:(0,a.jsx)(u.Z,{onClick:b,variant:f?"common":"primary",size:"small",text:f?void 0:g("share"),icon:h})})]}):null}},4030:function(e,n,t){var a=t(97458),o=t(820),s=t(52983),l=t(31737),r=t(62309),i=t(55524),c=t(91007),u=t(75421),d=t(44835),m=t(29658),h=t(89782),v=t(11556),f=t(38474);n.Z=e=>{let{descriptionText:n,shareHref:t,isSharable:p,hasMounted:x,icon:y}=e,g=encodeURIComponent(n),{trackEvent:b}=(0,r.h)(),k=(0,l.useTranslations)("socialShare"),j=(0,l.useTranslations)("shared"),N=(0,s.useMemo)(()=>"https://twitter.com/intent/tweet?text=".concat(g,"&url=").concat(t),[g,t]),w=(0,s.useMemo)(()=>"https://api.whatsapp.com/send?text=".concat(g,"%20").concat(t),[g,t]),C=(0,s.useMemo)(()=>"https://www.facebook.com/sharer/sharer.php?u=".concat(t,"&quote=").concat(g),[g,t]),A=(0,s.useCallback)(()=>{document.hasFocus&&(navigator.clipboard.writeText(x?(0,h.RP)(decodeURIComponent(t)):""),b("click copy link button",{}))},[t,x,b]),Z=(0,s.useCallback)(()=>{var e;if(!(null===(e=navigator)||void 0===e?void 0:e.share)){window.open(N,"_blank");return}navigator.share({text:"".concat(n," ").concat(x?(0,h.RP)(decodeURIComponent(t)):""),title:"Perplexity AI"}),b("click mobile native share button",{})},[t,N,n,x,b]),S=[{text:"Twitter",icon:u.NC,target:"_blank",href:N,onClick:()=>b("click tweet button",{})},{text:k("copyLink"),clickFeedback:!0,icon:m.nN,onClick:A},{text:"WhatsApp",icon:c.VH,target:"_blank",href:w,onClick:()=>b("click whatsapp button",{})},{text:"Facebook",icon:i.ne,target:"_blank",href:C,onClick:()=>b("click facebook button",{})}];return((0,s.useEffect)(()=>{x&&p&&A()},[x,p,A]),x&&p)?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mt-sm",children:(0,a.jsxs)(v.Z,{variant:"tiny",color:"super",children:[(0,a.jsx)(o.G,{icon:d.E9,className:"mr-xs"}),(0,a.jsx)("span",{children:k("linkCopied")})]})}),(0,a.jsxs)("div",{className:"hidden md:block",children:[(0,a.jsx)(v.Z,{variant:"baseSemi",className:"mb-sm mt-md",children:j("share")}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-xs",children:S.map(e=>(0,a.jsx)("div",{children:(0,a.jsx)(f.Z,{layout:"left",size:"small",fullWidth:!0,...e})},e.text))})]}),(0,a.jsx)("div",{className:"block md:hidden",children:(0,a.jsx)("div",{className:"mt-md",children:(0,a.jsx)(f.Z,{variant:"primary",fullWidth:!0,text:j("share"),target:"_blank",icon:y,onClick:Z})})})]}):null}},22381:function(e,n,t){var a=t(97458),o=t(22696),s=t(47532),l=t(52983),r=t(31737),i=t(37464),c=t(50882),u=t(46563),d=t(95901),m=t(38474),h=t(11556),v=t(25929),f=t(78398);n.Z=e=>{var n,t,p;let{showAvatar:x,showCreatorLabel:y,showEdit:g,isCurrentUser:b=!0,textColor:k,textVariant:j="smallBold",username:N,image:w,anon:C,avatarSize:A="small"}=e,{data:Z,update:S}=(0,s.useSession)(),[T,E]=l.useState(!1),[M,_]=l.useState(null!=N?N:b?null==Z?void 0:null===(n=Z.user)||void 0===n?void 0:n.username:"Anonymous"),[P,F]=l.useState(),{isMobileUserAgent:I}=(0,u.d)(),R=(0,r.useTranslations)("settings.account"),D=async()=>fetch("/api/user",{method:"PUT",body:JSON.stringify({username:M})}),{mutate:z,isPending:L}=(0,o.D)({mutationFn:D,onSuccess:e=>{e.json().then(n=>{if(200!==e.status){F(n.message);return}E(!1),F(void 0),S()})}});return(0,l.useEffect)(()=>{var e;_(null!=N?N:b?null==Z?void 0:null===(e=Z.user)||void 0===e?void 0:e.username:"Anonymous")},[N,b,null==Z?void 0:null===(t=Z.user)||void 0===t?void 0:t.username]),(0,a.jsxs)("div",{className:"relative flex items-center gap-x-xs",children:[x&&(0,a.jsx)(i.Z,{size:A,anon:C,user:null!=w?w:b&&null!==(p=null==Z?void 0:Z.user.image)&&void 0!==p?p:void 0}),T?(0,a.jsx)("div",{children:(0,a.jsx)(d.ZP,{isMobileUserAgent:I,value:M,disabled:L,errorText:null!=P?P:""===M?"Username cannot be empty":"",onChange:e=>{_(e.target.value)},className:"md:min-w-[300px]",inlineEditBlock:Z&&(0,a.jsxs)("div",{className:"ml-sm flex items-center gap-x-xs",children:[(0,a.jsx)(m.Z,{text:R("save"),variant:M===Z.user.username||""===M||L?"common":"primary",size:"small",disabled:M===Z.user.username||""===M||L,onClick:()=>z()}),(0,a.jsx)(m.Z,{text:R("cancel"),size:"small",disabled:L,onClick:()=>{_(Z.user.username),E(!1)}})]})})}):(0,a.jsx)(h.Z,{variant:j,color:k,className:"line-clamp-1 break-all",children:C?"Anonymous":M}),y&&(0,a.jsx)(v.ZP,{variant:"offset",className:"rounded-full px-sm py-xs",children:(0,a.jsx)(h.Z,{variant:"tiny",color:"light",children:"Author"})}),g&&!T&&(0,a.jsx)(f.Z,{pill:!0,size:"small",icon:c.faPenToSquare,onClick:()=>E(!0)})]})}},4403:function(e,n,t){var a=t(97458),o=t(52983);class s extends o.Component{static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,n){console.log({error:e,errorInfo:n})}render(){if(this.state.hasError){var e;return(null===(e=this.props)||void 0===e?void 0:e.fallback)?this.props.fallback:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Oops, there is an error!"}),(0,a.jsx)("button",{type:"button",onClick:()=>this.setState({hasError:!1}),children:"Try again?"})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1}}}n.Z=s},5299:function(e,n,t){t.d(n,{l:function(){return l}});var a=t(30574),o=t(61061),s=t(41275);let l=()=>{var e;let n=(0,o.nO)(),t=async e=>{let{pageParam:t}=e;(!t||t<1)&&(t=1);let a=(t-1)*50;return await (null==n?void 0:n.emitWithAck("list_user_collections",{limit:50,offset:a}))},{data:l}=(0,a.N)({enabled:!!n,queryKey:s.Xt,refetchOnReconnect:"always",initialPageParam:1,queryFn:e=>{let{pageParam:n}=e;return t({pageParam:n})},getNextPageParam:(e,n)=>{var t;return e&&(null===(t=e[0])||void 0===t?void 0:t.has_next_page)?n.length+1:void 0}});return{collections:null!==(e=null==l?void 0:l.pages[l.pages.length-1])&&void 0!==e?e:[]}}},53999:function(e,n,t){t.d(n,{p:function(){return l}});var a=t(96339),o=t(82943),s=t(1845);function l(){let e=(0,s.f)(),{thread:n}=(0,a.a0)();return e?(0,o.$)(n):void 0}},39294:function(e,n,t){t.d(n,{O:function(){return s}});var a=t(52983),o=t(61061);function s(){let e=(0,o.nO)(),[n,t]=(0,a.useState)(!1);return(0,a.useCallback)((a,o,s,l)=>{e&&!n&&(t(!0),e.emit("update_thread_access",a,o,{read_write_token:s},e=>{t(!1),(null==e?void 0:e.access)!=null&&(null==l||l(null==e?void 0:e.access))}))},[n,e])}},6941:function(e,n,t){t.d(n,{X:function(){return o}});var a=t(53541);function o(){let e=(0,a.useSearchParams)(),n=null==e?void 0:e.get("pplx-show-survey");return"edu"===n||"plus"===n||"default"===n||"copilot"===n?n:null}},8245:function(e,n,t){t.d(n,{k:function(){return o}});var a=t(31737);let o=()=>{let e=(0,a.useTranslations)("shared");return{yearAgo:e("yearAgo"),yearsAgo:e("yearsAgo"),monthAgo:e("monthAgo"),monthsAgo:e("monthsAgo"),dayAgo:e("dayAgo"),daysAgo:e("daysAgo"),hourAgo:e("hourAgo"),hoursAgo:e("hoursAgo"),minutesAgo:e("minutesAgo"),minuteAgo:e("minuteAgo"),justNow:e("justNow"),justNowShort:e("justNowShort")}}},30052:function(e,n,t){t.d(n,{Z:function(){return h}});var a=t(97458),o=t(53415),s=t(820),l=t(51987);t(52983);var r=t(36537),i=t(11556),c=t(51865),u=t.n(c);let d=[{locale:"en-US",translations:{year:"#y",month:"#mo",day:"#d",hour:"#h",minute:"#m"}},{locale:"fr-FR",translations:{year:"# an",month:"# mois",day:"# jour",hour:"# h",minute:"# min."}},{locale:"de-DE",translations:{year:"# J.",month:"# Mt.",day:"# T.",hour:"# Std.",minute:"# Min."}},{locale:"ja-JP",translations:{year:"# 年前",month:"# 月前",day:"# 日前",hour:"# 時間前",minute:"# 数分前"}},{locale:"ko-KR",translations:{year:"#년",month:"#개월",day:"#일",hour:"#시간",minute:"#분"}},{locale:"zh-CN",translations:{year:"#年",month:"#个月",day:"#天",hour:"#小时",minute:"#分钟"}},{locale:"es-ES",translations:{year:"# a\xf1o",month:"# mes",day:"# d\xeda",hour:"# hora",minute:"# min."}},{locale:"hi-IN",translations:{year:"#वर्ष",month:"#माह",day:"#दिन",hour:"#घं॰",minute:"#मि॰"}}],m=(e,n,t,a)=>{var o,s,r,i,c,u,m,h;let v=l.DateTime.local().diff(e,["years","months","days","hours","minutes","seconds"]).toObject(),f=null!==(r=v.years)&&void 0!==r?r:0,p=null!==(i=v.months)&&void 0!==i?i:0,x=null!==(c=v.days)&&void 0!==c?c:0,y=null!==(u=v.hours)&&void 0!==u?u:0,g=null!==(m=v.minutes)&&void 0!==m?m:0,b=null!==(h=null===(o=d.find(e=>e.locale===n))||void 0===o?void 0:o.translations)&&void 0!==h?h:null===(s=d.find(e=>"en-US"===e.locale))||void 0===s?void 0:s.translations,{yearsAgo:k,yearAgo:j,monthAgo:N,monthsAgo:w,daysAgo:C,dayAgo:A,hoursAgo:Z,minutesAgo:S,justNowShort:T,hourAgo:E,minuteAgo:M,justNow:_}=a,P="narrow"===t,F=(e,n)=>b[e].replace("#",String(n));return 1===f?P?"".concat(F("year",1)):"1 ".concat(j):f>=1?P?"".concat(F("year",Math.round(f))):"".concat(Math.round(f)," ").concat(k):1===p?P?"".concat(F("month",1)):"1 ".concat(N):p>=1?P?"".concat(F("month",Math.round(p))):"".concat(Math.round(p)," ").concat(w):1===x?P?"".concat(F("day",1)):"1 ".concat(A):x>=1?P?"".concat(F("day",Math.round(x))):"".concat(Math.round(x)," ").concat(C):1===y?P?"".concat(F("hour",1)):"1 ".concat(E):y>=1?P?"".concat(F("hour",Math.round(y))):"".concat(Math.round(y)," ").concat(Z):1===g?P?"".concat(F("minute",1)):"1 ".concat(M):g>=1?P?"".concat(F("minute",Math.round(g))):"".concat(Math.round(g)," ").concat(S):P?T:_};var h=e=>{let{timestamp:n,layoutType:t="right",textVariant:c="tiny",textColor:d="light",translations:h,textBlockProps:v,locale:f,style:p="long"}=e;if(!n)return null;let x=l.DateTime.fromISO("".concat(n,"Z")),y=m(x,f,p,h),g=x.toLocaleString(l.DateTime.DATETIME_FULL),{className:b,...k}=null!=v?v:{};return y?null!==y&&(0,a.jsx)(r.Z,{tooltipText:g,tooltipLayout:t,asChild:!0,children:(0,a.jsxs)(i.Z,{variant:c,color:d,className:u()("gap-x-xs flex cursor-default items-center",b),...k,children:[(0,a.jsx)("span",{children:(0,a.jsx)(s.G,{size:"sm",icon:o.SZ})}),(0,a.jsx)("span",{className:"truncate",children:y})]})}):null}}}]);